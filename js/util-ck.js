// remove click delay on mobile - from http://cubiq.org/remove-onclick-delay-on-webkit-for-iphone
function NoClickDelay(e){this.element=e;window.Touch&&this.element.addEventListener("touchstart",this,!1)}function hashString(e){var t=0,n,r;if(e.length==0)return t;for(n=0;n<e.length;n++){r=e.charCodeAt(n);t=(t<<5)-t+r;t&=t}return t}function enc_name(e){var t=encodeURIComponent(e),n=t.replace(/%/g,"").replace(/'/g,"");return n}function draw_rrectangle(e,t,n,r,i,s,o){if(r<t){var u=t;t=r;r=u}if(i<n){var u=n;n=i;i=u}var a=t,f=n,l=Math.abs(r-t),c=Math.abs(i-n);e.beginPath();e.moveTo(a,f+s);e.lineTo(a,f+c-s);e.quadraticCurveTo(a,f+c,a+s,f+c);e.lineTo(a+l-s,f+c);e.quadraticCurveTo(a+l,f+c,a+l,f+c-s);e.lineTo(a+l,f+s);e.quadraticCurveTo(a+l,f,a+l-s,f);e.lineTo(a+s,f);e.quadraticCurveTo(a,f,a,f+s);e.closePath();if(o==="stroke")e.stroke();else if(o==="fill")e.fill();else if(o==="clear"){e.save();e.clip();e.clearRect(0,0,canvas.width,canvas.height);e.restore()}}function random_color(){var e=["#000000","#0000FF","#FF0000","#00FF00","#FFFF00","#FF00FF","#FF8080","#808080","#800000","#FF8000"];return e[Math.floor(Math.random()*e.length)]}function coma_number(e){var t=e.toString().split(".");t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,",");return t.join(".")}function linkify(e){var t=/(([a-z]+:\/\/)?(([a-z0-9\-]+\.)+([a-z]{2}|aero|arpa|biz|com|coop|edu|gov|info|int|jobs|mil|museum|name|nato|net|org|pro|travel|local|internal))(:[0-9]{1,5})?(\/[a-z0-9_\-\.~]+)*(\/([a-z0-9_\-\.]*)(\?[a-z0-9+_\-\.%=&amp;]*)?)?(#[a-zA-Z0-9!$&'()*+.=-_~:@/?]*)?)(\s+|$)/gi;return e.replace(t,function(e){return'<a href="'+e+'" target="_blank">'+e+"</a>"})}NoClickDelay.prototype={handleEvent:function(e){switch(e.type){case"touchstart":this.onTouchStart(e);break;case"touchmove":this.onTouchMove(e);break;case"touchend":this.onTouchEnd(e)}},onTouchStart:function(e){e.preventDefault();this.moved=!1;this.element.addEventListener("touchmove",this,!1);this.element.addEventListener("touchend",this,!1)},onTouchMove:function(e){this.moved=!0},onTouchEnd:function(e){this.element.removeEventListener("touchmove",this,!1);this.element.removeEventListener("touchend",this,!1);if(!this.moved){var t=document.elementFromPoint(e.changedTouches[0].clientX,e.changedTouches[0].clientY);t.nodeType==3&&(t=t.parentNode);var n=document.createEvent("MouseEvents");n.initEvent("click",!0,!0);t.dispatchEvent(n)}}};var COLOR_MAX=10,BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(e){for(var t=0;t<e.length;t++){var n=e[t].string,r=e[t].prop;this.versionSearchString=e[t].versionSearch||e[t].identity;if(n){if(n.indexOf(e[t].subString)!=-1)return e[t].identity}else if(r)return e[t].identity}},searchVersion:function(e){var t=e.indexOf(this.versionSearchString);if(t==-1)return;return parseFloat(e.substring(t+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};BrowserDetect.init();window.onerror=function(e,t,n){try{if(navigator.userAgent.indexOf("Firefox")===-1||e!=="Error loading script")if(navigator.userAgent.indexOf("Safari")===-1||e!=="JavaScript execution exceeded timeout"){var r={};r.message=e;r.browser=BrowserDetect.browser+" "+BrowserDetect.version;r.OS=BrowserDetect.OS;r.scriptURL=t;r.browserURL=window.location.toString();r.line=n;r.trace=printStackTrace().join("\n");mixpanel.track("JS_error",r)}}catch(i){}return!1};