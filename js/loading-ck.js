function loading(){var e=!1,t=document.getElementById("loading"),n=t.getContext("2d");n.strokeStyle="#444444";n.fillStyle="#FFFFFF";var r=1e3/30,i=Math.ceil(t.height/2),s=100,o=0,u=.8/r,a=0,f=function(){if(!$("#analytics_page").is(":hidden"))if(!e){n.clearRect(0,0,t.width,t.height);n.beginPath();a+=Math.PI*2*u;n.arc(t.width/2,t.height/2,10,a,a+Math.PI*2*o,!1);n.stroke();n.closePath();n.beginPath();n.arc(t.width/2,t.height/2,5,2*a,2*a+Math.PI*2*o,!1);n.stroke();n.closePath();o+=u;o>1&&(o=0);if(TWITTER!==undefined)for(var l=0;l<SEARCHES.length;l++){var c=enc_name(SEARCHES[l]);if(TWITTER.tweets_per_second[c].length>2){e=!0;UI.add_tps_chart();break}}}else{var h=(new Date).getTime(),p=1-(TWITTER.end_time-h)/TWITTER.update_interval;p>1&&(p=1);if(s>p||TWITTER.error){n.clearRect(0,0,t.width,t.height);draw_rrectangle(n,0,0,t.width,t.height,i,"stroke")}s=p;var d=s*t.width;d>=t.width&&(d=t.width-1);if(s*t.width>=i){TWITTER.error?n.fillStyle="#FF0000":n.fillStyle="#FFFFFF";draw_rrectangle(n,1,1,d,t.height-1,i,"fill")}if(TWITTER.error){n.fillStyle="#000000";n.textAlign="center";n.font="16px sans-serif";n.fillText("Waiting on Twitter",t.width/2,t.height/2+6)}}setTimeout(f,r)};f()};