function tps_chart(){this.title="Tweets per Second";this.data=TWITTER.tweets_per_second;this.height=200;this.width=$("#pages").width();this.xPadding=40;this.topPadding=20;this.bottomPadding=30;this.num_to_show=120;this.chart=d3.select("#analytics").append("svg").attr("width",this.width).attr("height",this.height);this.draw_text();this.update()}tps_chart.prototype.update=function(){if(!$("#analytics_page").is(":hidden")){this.chart.selectAll("path").remove();this.chart.selectAll("rect").remove();this.draw_axis();var e=this.xScale,t=this.yScale,n=this.xPadding,r=d3.svg.line().x(function(t,n){return e(n)}).y(function(e){return t(e)}).interpolate("basis");for(var i=0;i<SEARCHES.length;i++){var s=this.data[enc_name(SEARCHES[i])].slice(0,this.num_to_show+1);this.chart.append("svg:path").attr("d",r(s)).attr("class","chart_line").style("fill","rgba(0,0,0,0)").style("stroke",COLORS[i]).attr("transform","translate("+(e(0)-n)+")").transition().ease("linear").duration(1100).attr("transform","translate("+(e(1)-n)+")")}this.chart.append("svg:rect").attr("width",this.xPadding).attr("height",this.height-this.bottomPadding).attr("x",this.width-this.xPadding).attr("y",0).style("fill","#f2f2f2")}};tps_chart.prototype.resize=function(){this.width=$("#pages").width();this.chart.attr("width",this.width);this.draw_text()};tps_chart.prototype.draw_axis=function(){this.chart.selectAll(".axis").remove();var e=1;for(var t=0;t<SEARCHES.length;t++){var n=d3.max(this.data[enc_name(SEARCHES[t])].slice(0,this.num_to_show),function(e){return e});n>e&&(e=Math.ceil(n))}this.xScale=d3.scale.linear().domain([0,this.num_to_show]).range([this.xPadding,this.width-this.xPadding]);this.xAxis=d3.svg.axis().scale(this.xScale).orient("bottom").ticks(Math.round(this.width/100));this.chart.append("g").attr("class","axis").attr("id","xAxis").attr("transform","translate(0, "+(this.height-this.bottomPadding)+")").call(this.xAxis);this.yScale=d3.scale.linear().domain([0,e]).range([this.height-this.bottomPadding,this.topPadding]);this.yAxis=d3.svg.axis().scale(this.yScale).orient("left").ticks(Math.round(this.height/100));this.chart.append("g").attr("class","axis").attr("id","yAxis").attr("transform","translate("+this.xPadding+", 0)").call(this.yAxis)};tps_chart.prototype.draw_text=function(){this.chart.selectAll("text").remove();this.chart.append("text").text("Tweets/second").attr("font-size","20px").attr("x",this.width/2).attr("y",this.topPadding).attr("text-anchor","middle");this.chart.append("text").attr("class","axis_label").attr("text-anchor","middle").attr("x",this.width/2).attr("y",this.height-2).text("time (s)");this.chart.append("text").attr("class","axis_label").attr("text-anchor","middle").attr("y",10).attr("x",-(this.height-this.bottomPadding-this.topPadding)/2-this.topPadding).attr("transform","rotate(-90)").text("new tweets")};